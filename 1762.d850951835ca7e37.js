(self.webpackChunkcd_moduleman=self.webpackChunkcd_moduleman||[]).push([[1762],{2877:(D,g,n)=>{n.d(g,{S:()=>a});var d=n(467),y=n(327),e=n(3425),M=n(2264),I=n(4178),F=n(8788);let a=(()=>{class u{svMenu;svModule;svModman;constructor(s,t,m){this.svMenu=s,this.svModule=t,this.svModman=m}loadDdls(s,t){var m=this;return(0,d.A)(function*(){y.M9.token=s.token,y.M9.step=t,y.M9.controlName="moduleId",y.M9.getFn$=m.svModule.getModule$(y.lw,s.token),yield m.svModman.setDdl$(yield y.M9).subscribe(v=>{console.log("menu/MenuModService::loadDdls()/ret(modules):",v),t.fields.forEach(p=>{"moduleId"===p.name&&(p.ddlInfo.data=v)})}),e.Bx.token=s.token,e.Bx.step=t,e.Bx.controlName="menuParentId",e.Bx.getFn$=m.svMenu.getMenuList$(e.EG,s.token),yield m.svModman.setDdl$(yield e.Bx).subscribe(v=>{console.log("menu/MenuModService::loadDdls()/ret(menus):",v),t.fields.forEach(p=>{"menuParentId"===p.name&&(p.ddlInfo.data=v)})})})()}setCdObj(s,t,m){console.log("MenuModService::setCdObj()/fg:",s);const v=s.controls.moduleId.value;console.log("MenuModService::setCdObj()/moduleId:",v);const p=t.getDdlData("moduleId",e.v4);console.log("MenuModService::setCdObj()/modules:",p);const _=p.filter((S,j)=>S.moduleId===v?S:null);console.log("MenuModService::setCdObj()/selectedModule:",_);let C=null;_.length>0&&(C=_[0].moduleGuid),console.log("MenuModService::setCdObj()/moduleGuid:",C),C&&(m.cdObj={cdObjName:s.controls.menuName.value,cdObjTypeGuid:"f5df4494-5cc9-4463-8e8e-c5861703280e",parentModuleGuid:C,cdObjDispName:null,icon:null,showIcon:null,cdObjEnabled:null})}static \u0275fac=function(t){return new(t||u)(M.\u0275\u0275inject(I.MenuService),M.\u0275\u0275inject(I.ModuleService),M.\u0275\u0275inject(F.O))};static \u0275prov=M.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},3425:(D,g,n)=>{n.d(g,{AV:()=>a,Bx:()=>m,EG:()=>t,Fl:()=>v,PG:()=>r,gb:()=>u,v4:()=>F,yr:()=>s});var d=n(2952),e=n(4178),f=n(4866);const T=new e.FormsService,F=[{title:"ID",name:"menuId",dbName:"menu_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"number",disabled:!0,formControlsConfig:["",[]]},{title:"Guid",name:"menuGuid",dbName:"menu_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Label",name:"menuLabel",dbName:"menu_label",type:e.FieldType.string,fetchable:!0,updateable:!1,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Name",name:"menuName",dbName:"menu_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[d.Validators.minLength(3),d.Validators.maxLength(25),d.Validators.required]]},{title:"MenuParent",name:"menuParentId",dbName:"menu_parent_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.searchDropDown,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,f.of)([]),selValueField:"menuName",selIndex:"menuId",selPlaceholder:"...Choose",data:null},formatt:"number",disabled:!0,savable:!0,formControlsConfig:["",[d.Validators.required]]},{title:"ModuleParent",name:"moduleId",dbName:"module_id",primaryField:"menuParent",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.searchDropDown,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,f.of)([]),selValueField:"moduleName",selIndex:"moduleId",selPlaceholder:"...Choose",data:null},formatt:"number",disabled:!0,savable:!0,formControlsConfig:["",[d.Validators.required]]},{title:"Description",name:"menuDescription",dbName:"menu_description",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.textArea,fieldFor:e.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[d.Validators.minLength(0),d.Validators.maxLength(300)]]},{title:"Icon",name:"menuIcon",dbName:"menu_icon",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.ddlIcons,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,f.of)([]),selValueField:"iconName",selIndex:"iconId",selPlaceholder:"...choose",ddlIconId:"iconDdlIdX",searchInputId:"searchInputIdX",searchInputName:"searchInputNameX",selectedValue:"",data:null},formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[d.Validators.minLength(2),d.Validators.maxLength(50),d.Validators.required]]},{title:"Path",name:"path",dbName:"path",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm}],formatt:"text",formControlsConfig:["",[d.Validators.minLength(3),d.Validators.maxLength(100),d.Validators.required]]},{title:"Action",name:"action",type:e.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:e.ControlType.action,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.action,fieldFor:e.FieldFor.createForm}],Fn:"createMenu"},{title:"Search",name:"iconSearch",type:e.FieldType.any,controls:[],formControlsConfig:["",[]]}],a={data:{},cdObj:null,valid:null,ctx:"Sys"},u=[{toReplace:"menuLabel",replaceWith:"menuName"}],r={token:"",stepTitle:"Create Menu",stepItems:{prevButtonId:"stepToModule",lastButtonId:"endSteps"},tabPaneId:"menuInfo",cardTitle:"Menu Information",cardTitleDesc:"Every module has to have at least one menu item. You can use the + button to add more items.",module:"moduleman",controller:"menu",formGroup:null,fields:T.filterByFieldFor(F,e.FieldFor.createForm)},s={name:"Menu Wizard",steps:[r]},t={select:["menuId","menuName","menuGuid"],where:{}},m={getFn$:null,selIndex:t.select[0],selValueField:t.select[1],fetchFields:t.select,step:null,token:null,controlName:"menuParentId"},v=[{menuName:"create",menuGuid:"bd9b5bda6ab",navLocation:"/moduleman/menu/create",actionType:e.ActionType.navigate},{menuName:"dashboard",menuGuid:"d27294db69c1",navLocation:"/moduleman/menu/dashboard",actionType:e.ActionType.navigate}]},327:(D,g,n)=>{n.d(g,{AQ:()=>F,Fl:()=>t,M9:()=>v,VP:()=>a,ad:()=>r,lw:()=>m,n4:()=>s,o0:()=>T});var d=n(2952),e=n(4178),f=n(3425);const I=new e.FormsService,T=[{title:"ID",name:"moduleId",dbName:"module_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"number",disabled:!0},{title:"Guid",name:"moduleGuid",dbName:"module_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Name",name:"moduleName",dbName:"module_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[d.Validators.minLength(4),d.Validators.maxLength(20),d.Validators.required]]},{title:"Description",name:"moduleDescription",dbName:"module_description",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.textArea,fieldFor:e.FieldFor.createForm}],formatt:"textArea",savable:!0,formControlsConfig:["",[d.Validators.minLength(0),d.Validators.maxLength(300)]]},{title:"Enabled",name:"moduleEnabled",dbName:"module_enabled",type:e.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.status,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Sys",name:"isSysModule",dbName:"is_sys_module",type:e.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.status,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[d.Validators.required]]},{title:"System Module",name:"isSys",controls:[{controlType:e.ControlType.toggleSwitch,fieldFor:e.FieldFor.createForm}],primaryField:"isSysModule",formControlsConfig:["",[]]},{title:"App Module",name:"isApp",controls:[{controlType:e.ControlType.toggleSwitch,fieldFor:e.FieldFor.createForm}],primaryField:"isSysModule",formControlsConfig:["",[]]},{title:"Action",name:"action",type:e.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:e.ControlType.action,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.action,fieldFor:e.FieldFor.tableDisplay}]}],F={controllerName:"isSysModule",selectedItem:{index:0,optControlId:"",value:"",selected:!1},controlTypes:e.ControlType.toggleSwitch,options:[{index:0,optControlId:"isSys",value:"isSys",selected:!0},{index:1,optControlId:"isApp",value:"isApp",selected:!1}]},a={valid:null,data:{},ctx:"Sys"},r={token:"",stepTitle:"Create Module",stepItems:{nextButtonId:"stepToMenu"},tabPaneId:"moduleInfo",cardTitle:"Module Information",cardTitleDesc:"Fill all information below",module:"moduleman",controller:"module",formGroup:null,fields:I.filterByFieldFor(T,e.FieldFor.createForm)},s={name:"Module Wizard",steps:[r,f.PG]},t=[{menuName:"create",menuGuid:"bd9b5bda5ab",navLocation:"/moduleman/module/create",actionType:e.ActionType.navigate},{menuName:"dashboard",menuGuid:"d27294db59c1",navLocation:"/moduleman/module/dashboard",actionType:e.ActionType.navigate}],m={select:["moduleId","moduleName","moduleGuid"],where:{}},v={getFn$:null,selIndex:m.select[0],selValueField:m.select[1],fetchFields:m.select,step:null,token:null,controlName:"moduleId"}},1762:(D,g,n)=>{n.r(g),n.d(g,{ModuleModule:()=>V});var d=n(9354),y=n(2952),e=n(6393),M=n(1475),f=n(4939),I=n(5425),T=n(8351),F=n(6758),a=n(4178),u=n(777),r=n(5662),s=n(327),t=n(2264);let m=(()=>{class c{aRoute;route;router;svModule;svNazTable;svAcl;svForms;svPage;svNav;svSess;baseModel=new a.BaseModel("","");dSource={fields:[],data:[]};cardTitle="Modules";cardBodyId="cdModules";searchInputId="inputSearchModule";editRoute="/moduleman/module/edit";deleteRoute="/moduleman/module/delete";createRoute="/moduleman/module/create";jAppState;nazTable;dsEmittData;sQuery;dQuery;filter={};tpData=a.DEFAULT_TPD;ddlData=s.Fl;constructor(o,l,i,h,b,E,N,P,A,O){this.aRoute=o,this.route=l,this.router=i,this.svModule=h,this.svNazTable=b,this.svAcl=E,this.svForms=N,this.svPage=P,this.svNav=A,this.svSess=O,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(o=>{if(o){console.log("cd-ModulemanV2::Module/ListComponent::params:",o),o.token&&o.token.length>0&&(this.baseModel.token=o.token),console.log("cd-ModulemanV2::Module/ListComponent::ngOnInit()/this.baseModel.token:",this.baseModel.token);const l=localStorage.getItem(o.token);if(l){const i=JSON.parse(l);this.baseModel.sess=i,console.log("cd-ModulemanV2::Module/ListComponent::ngOnInit()/this.baseModel.sess:",this.baseModel.sess)}this.svAcl.initComponent(o,this,this.svSess).then(i=>{console.log("cd-ModulemanV2::Module/ListComponent::ngOnInit()/this.svAcl.initComponent/ret:",i),i?(this.sQuery=this.svNazTable.initSQuery(this),console.log("cd-ModulemanV2::Module/ListComponent::ngOnInit()/this.sQuery:",this.sQuery),this.dsEmittData=this.svNazTable.initEmittData(this),console.log("cd-ModulemanV2::Module/ListComponent::ngOnInit()/this.dsEmittData:",this.dsEmittData)):this.svNav.nsNavigate(this,"/","Error loading ModuleList page")})}})}ngAfterViewInit(){}init(){this.baseModel=new a.BaseModel(s.ad.module,s.ad.controller),this.baseModel.data.fields=s.o0.filter(o=>o.fetchable||o.type===a.FieldType.action),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(s.ad.controller,"List")}execQuery(o){this.svNazTable.execQuery(o,this.svModule.getModule$(this.sQuery,this.baseModel.sess.cd_token),this)}setSearchQuery(o){this.sQuery=o.sQuery,this.execQuery(o)}getSelect(){console.log("cd-ModulemanV2::Module/ListComponent::getSelect()/this.baseModel.data.fields:",this.baseModel.data.fields);const o=this.baseModel.data.fields.filter(i=>i.fetchable).map(i=>i.name);console.log("cd-ModulemanV2::Module/ListComponent::getSelect()/fields:",o);let l=[];return o.forEach((i,h)=>{l.push(l.push(o[h]))}),l}static \u0275fac=function(l){return new(l||c)(t.\u0275\u0275directiveInject(r.ActivatedRoute),t.\u0275\u0275directiveInject(r.ActivatedRoute),t.\u0275\u0275directiveInject(r.Router),t.\u0275\u0275directiveInject(a.ModuleService),t.\u0275\u0275directiveInject(u.NazTableService),t.\u0275\u0275directiveInject(a.AclService),t.\u0275\u0275directiveInject(a.FormsService),t.\u0275\u0275directiveInject(u.PageService),t.\u0275\u0275directiveInject(a.NavService),t.\u0275\u0275directiveInject(a.SessService))};static \u0275cmp=t.\u0275\u0275defineComponent({type:c,selectors:[["app-list"]],viewQuery:function(l,i){if(1&l&&t.\u0275\u0275viewQuery(u.NazTableComponent,5),2&l){let h;t.\u0275\u0275queryRefresh(h=t.\u0275\u0275loadQuery())&&(i.nazTable=h.first)}},decls:1,vars:9,consts:[[3,"searchQuery","baseModel","cardTitle","cardBodyId","searchInputId","tpData","filter","ddlData","editRoute","deleteRoute"]],template:function(l,i){1&l&&(t.\u0275\u0275elementStart(0,"naz-table",0),t.\u0275\u0275listener("searchQuery",function(b){return i.setSearchQuery(b)}),t.\u0275\u0275elementEnd()),2&l&&t.\u0275\u0275property("baseModel",i.baseModel)("cardTitle",i.cardTitle)("cardBodyId",i.cardBodyId)("searchInputId",i.searchInputId)("tpData",i.tpData)("filter",i.filter)("ddlData",i.ddlData)("editRoute",i.editRoute)("deleteRoute",i.deleteRoute)}})}return c})();var v=n(467);let p=(()=>{class c{aRoute;svModule;svSess;svAcl;svNotif;svPage;baseModel;formConfig={};backRoute="/moduleman/module/list";updateQuery;constructor(o,l,i,h,b,E){this.aRoute=o,this.svModule=l,this.svSess=i,this.svAcl=h,this.svNotif=b,this.svPage=E,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(o=>{this.svAcl.initComponent(o,this,this.svSess).then(l=>{console.log("module/EditComponent::ngOnInit()/ret:",l)})})}init(){this.baseModel=new a.BaseModel(s.ad.module,s.ad.controller),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(s.ad.controller,"Edit"),this.baseModel.data.subTitle="only allowed fields are editable"}update(o){var l=this;return(0,v.A)(function*(){l.svModule.updateModule$(o,l.baseModel.token).subscribe(i=>{l.svNotif.emitNotif({pushData:{appId:"",appSockets:[],pushGuid:"",m:null,pushRecepients:a.DEFAULT_PUSH_RECEPIENTS,emittEvent:"push-notif",triggerEvent:"send-notif",token:"",commTrack:{initTime:null,relayTime:null,pushed:!1,pushTime:null,relayed:!1,deliveryTime:null,delivered:!1,completed:!1,completedTime:null,cached:!1,cachedTime:null,saved:!1,savedTime:null},isNotification:null,isAppInit:null},req:null,resp:null})})})()}static \u0275fac=function(l){return new(l||c)(t.\u0275\u0275directiveInject(r.ActivatedRoute),t.\u0275\u0275directiveInject(a.ModuleService),t.\u0275\u0275directiveInject(a.SessService),t.\u0275\u0275directiveInject(a.AclService),t.\u0275\u0275directiveInject(a.NotificationService),t.\u0275\u0275directiveInject(u.PageService))};static \u0275cmp=t.\u0275\u0275defineComponent({type:c,selectors:[["app-edit"]],decls:1,vars:3,consts:[[3,"updateQuery","baseModel","pageDescription","formConfig","backRoute"]],template:function(l,i){1&l&&(t.\u0275\u0275elementStart(0,"naz-table-edit",0),t.\u0275\u0275listener("updateQuery",function(b){return i.update(b)}),t.\u0275\u0275elementEnd()),2&l&&t.\u0275\u0275property("baseModel",i.baseModel)("formConfig",i.formConfig)("backRoute",i.backRoute)},dependencies:[u.EditComponent]})}return c})(),_=(()=>{class c{aRoute;svModule;svAcl;svNotif;svPage;svSess;baseModel;formConfig={};deleteQuery;constructor(o,l,i,h,b,E){this.aRoute=o,this.svModule=l,this.svAcl=i,this.svNotif=h,this.svPage=b,this.svSess=E,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(o=>{this.svAcl.initComponent(o,this,this.svSess).then(l=>{})})}init(){this.baseModel=new a.BaseModel(s.ad.module,s.ad.controller),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(s.ad.controller,"Delete"),this.baseModel.data.subTitle="Confirm before delete"}deleteItem(o){var l=this;return(0,v.A)(function*(){l.svModule.deleteModules$(o,l.baseModel.token).subscribe(i=>{l.svNotif.emitNotif({pushData:{appId:"",appSockets:[],pushGuid:"",m:null,pushRecepients:a.DEFAULT_PUSH_RECEPIENTS,emittEvent:"push-notif",triggerEvent:"send-notif",token:"",commTrack:{initTime:null,relayTime:null,pushed:!1,pushTime:null,relayed:!1,deliveryTime:null,delivered:!1,completed:!1,completedTime:null,cached:!1,cachedTime:null,saved:!1,savedTime:null},isNotification:null,isAppInit:null},req:null,resp:null})})})()}static \u0275fac=function(l){return new(l||c)(t.\u0275\u0275directiveInject(r.ActivatedRoute),t.\u0275\u0275directiveInject(a.ModuleService),t.\u0275\u0275directiveInject(a.AclService),t.\u0275\u0275directiveInject(a.NotificationService),t.\u0275\u0275directiveInject(u.PageService),t.\u0275\u0275directiveInject(a.SessService))};static \u0275cmp=t.\u0275\u0275defineComponent({type:c,selectors:[["app-delete"]],decls:1,vars:2,consts:[[3,"deleteQuery","baseModel","pageDescription","formConfig"]],template:function(l,i){1&l&&(t.\u0275\u0275elementStart(0,"naz-table-delete",0),t.\u0275\u0275listener("deleteQuery",function(b){return i.deleteItem(b)}),t.\u0275\u0275elementEnd()),2&l&&t.\u0275\u0275property("baseModel",i.baseModel)("formConfig",i.formConfig)},dependencies:[u.DeleteComponent]})}return c})();var C=n(3425),S=n(2877),j=n(8788);const B=[{path:"list",component:m},{path:"edit",component:p},{path:"delete",component:_},{path:"create",component:(()=>{class c{aRoute;svModule;svMenu;svMenuFront;svAcl;svForm;svNotif;fb;svModman;svPage;svPush;svSess;baseModel;newModule=s.VP;menuStep;newMenu=C.AV;constructor(o,l,i,h,b,E,N,P,A,O,U,x){this.aRoute=o,this.svModule=l,this.svMenu=i,this.svMenuFront=h,this.svAcl=b,this.svForm=E,this.svNotif=N,this.fb=P,this.svModman=A,this.svPage=O,this.svPush=U,this.svSess=x,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(o=>{this.svAcl.initComponent(o,this,this.svSess).then(l=>{l&&(this.svPush.init(this),this.menuStep.token=this.baseModel.token,this.baseModel.data.step.token=this.baseModel.token)})})}ngAfterViewInit(){this.svMenuFront.loadDdls(this.baseModel,this.menuStep).then(o=>{}),this.svModman.setIconsData$(this.menuStep,"icon"),this.enableStepToMenu()}init(){this.baseModel=new a.BaseModel(s.ad.module,s.ad.controller),this.baseModel.data.fields=this.svForm.filterByFieldFor(s.o0,a.FieldFor.createForm),this.baseModel.data.wizardModel=s.n4,this.baseModel.data.step=this.svForm.filterStepsByController(this.baseModel.data.wizardModel,"module")[0],this.baseModel.data.form=this.fb.group(this.svForm.getFormControlConfig(s.o0)),this.baseModel.data.step.formGroup=this.baseModel.data.form,this.menuStep=this.svForm.filterStepsByController(this.baseModel.data.wizardModel,"menu")[0],this.menuStep.formGroup=this.fb.group(this.svForm.getFormControlConfig(C.v4)),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(s.ad.controller,"Create")}setSelectedIcon(o){this.svForm.setSelectedIcon(o,this.baseModel,this.menuStep)}toggleScope(o){s.AQ.selectedItem=s.AQ.options.find(l=>l.optControlId===o.id),s.AQ.selectedItem.selected=o.checked,this.baseModel.data.form.controls[s.AQ.controllerName].setValue(o.checked),this.baseModel.data.form.controls[s.AQ.controllerName].setValue("isSys"===s.AQ.selectedItem.value),this.svForm.deselectGroupControls(o,s.AQ,this.baseModel)}save(o){let l;switch(o.controller){case"module":l=this.svModule.createModule$(this.newModule,this.baseModel.token),this.svForm.saveForm(o,this.newModule,l,this.svPush.pushEnvelop,this.svNotif);break;case"menu":this.svMenuFront.setCdObj(o.formGroup,this.svForm,this.newMenu),l=this.svMenu.createMenu$(this.newMenu,this.baseModel.token),this.svForm.saveForm(o,this.newMenu,l,this.svPush.pushEnvelop,this.svNotif)}}finishFunction(){console.log("finishing!!")}enableStepToMenu(){const o=document.getElementById("stepToMenu");o&&(o.disabled=!1)}static \u0275fac=function(l){return new(l||c)(t.\u0275\u0275directiveInject(r.ActivatedRoute),t.\u0275\u0275directiveInject(a.ModuleService),t.\u0275\u0275directiveInject(a.MenuService),t.\u0275\u0275directiveInject(S.S),t.\u0275\u0275directiveInject(a.AclService),t.\u0275\u0275directiveInject(a.FormsService),t.\u0275\u0275directiveInject(a.NotificationService),t.\u0275\u0275directiveInject(y.FormBuilder),t.\u0275\u0275directiveInject(j.O),t.\u0275\u0275directiveInject(u.PageService),t.\u0275\u0275directiveInject(a.CdPushService),t.\u0275\u0275directiveInject(a.SessService))};static \u0275cmp=t.\u0275\u0275defineComponent({type:c,selectors:[["app-create"]],decls:1,vars:3,consts:[[3,"toggleEmitter","saveEmitter","relaySelIconEmitter","baseModel","jAppState","wizardModel"]],template:function(l,i){1&l&&(t.\u0275\u0275elementStart(0,"naz-table-create",0),t.\u0275\u0275listener("toggleEmitter",function(b){return i.toggleScope(b)})("saveEmitter",function(b){return i.save(b)})("relaySelIconEmitter",function(b){return i.setSelectedIcon(b)}),t.\u0275\u0275elementEnd()),2&l&&t.\u0275\u0275property("baseModel",i.baseModel)("jAppState",i.baseModel.jAppState)("wizardModel",i.baseModel.data.wizardModel)},dependencies:[u.CreateComponent]})}return c})()},{path:"dashboard",component:n(4287).S}];let w=(()=>{class c{static \u0275fac=function(l){return new(l||c)};static \u0275mod=t.\u0275\u0275defineNgModule({type:c});static \u0275inj=t.\u0275\u0275defineInjector({imports:[r.RouterModule.forChild(B),r.RouterModule]})}return c})(),V=(()=>{class c{static \u0275fac=function(l){return new(l||c)};static \u0275mod=t.\u0275\u0275defineNgModule({type:c});static \u0275inj=t.\u0275\u0275defineInjector({imports:[d.CommonModule,y.FormsModule,y.ReactiveFormsModule,M.NgbNavModule,M.NgbDropdownModule,M.NgbTooltipModule,M.NgbAccordionModule,u.NazUiModule,u.NazTableModule,u.NazCreateModule,u.NazEditModule,u.NazDeleteModule,f.FilterPipeModule,I.ArchwizardModule,T.NgToggleModule,w,e.NgSelectModule,a.BaseModule.forChild(F.c),a.CdPushModule.forChild(F.c)]})}return c})()},8788:(D,g,n)=>{n.d(g,{O:()=>F});var d=n(4178),e=n(4866),f=n(2264);let F=(()=>{class a{svMenu;svNotif;svForm;token;ddlData={config:{suppressScrollX:!0,wheelSpeed:.3},header:{title:{lable:"Notifications",cls:"",action:null},sideLink:{lable:"View All",cls:"",action:null}},footer:{label:"View All",icon:"",action:null},data:[{label:"item 1",description:"If several languages coalesce the grammar",time:"3 min ago"},{label:"item 2",description:"It will seem like simplified English",time:"1 hr ago"},{label:"item 3",description:"If several languages coalesce the grammar",time:"4 hr ago"}]};pushEnvelop={pushData:{appId:"",appSockets:[],pushGuid:"",m:null,pushRecepients:d.DEFAULT_PUSH_RECEPIENTS,emittEvent:"push-notif",triggerEvent:"send-notif",token:"",commTrack:{initTime:null,relayTime:null,pushed:!1,pushTime:null,relayed:!1,deliveryTime:null,delivered:!1,completed:!1,completedTime:null,cached:!1,cachedTime:null,saved:!1,savedTime:null},isNotification:null,isAppInit:null},req:null,resp:null};numericNumberReg1="^-?[0-9]\\d*(\\.\\d{1,2})?$";numericNumberReg2="/^[0-9]d*$/";numericNumberReg3=new RegExp(/^-?[0-9]\\d*(\\.\\d{1,2})?$/,"i");numericNumberReg4=new RegExp(/^[0-9]\d*$/,"i");constructor(r,s,t){this.svMenu=r,this.svNotif=s,this.svForm=t}setIconsData$(r,s){r.fields.map((t,m)=>{t.name===s&&(r.fields[m].ddlInfo.selData$=(0,e.of)(this.ddlData),r.fields[m].ddlInfo.selIndex="iconId",r.fields[m].ddlInfo.selValueField="iconName",r.fields[m].ddlInfo.selPlaceholder="...Choose")})}setDdl$(r){if(r.token){const s=new e.Subject;let t=[];return r.getFn$.subscribe(m=>{const v=m;console.log("ModulemanService::setDdl$()/response:",v),console.log("ModulemanService::setDdl$()/ddlCtx.step.fields:",r.step),v.app_state.success?(t=v.data.items,r.step.fields.map((p,_)=>{console.log("ModulemanService::setDdl$()/f.name1:",p.name),console.log("ModulemanService::setDdl$()/ddlCtx.controlName:",r.controlName),console.log("ModulemanService::setDdl$()/f:",p),p.name===r.controlName&&"ddlInfo"in p&&(console.log("ModulemanService::setDdl$()/f.name2:",p.name),r.step.fields[_].ddlInfo.selData$=(0,e.of)(v.data.items),r.step.fields[_].ddlInfo.selIndex=r.selIndex,r.step.fields[_].ddlInfo.selValueField=r.selValueField,r.step.fields[_].ddlInfo.selPlaceholder="...Choose")}),s.next(t)):(this.pushEnvelop.resp=v,this.svNotif.emitNotif(this.pushEnvelop),s.next(t))}),s.asObservable()}return(0,e.of)([])}static \u0275fac=function(s){return new(s||a)(f.\u0275\u0275inject(d.MenuService),f.\u0275\u0275inject(d.NotificationService),f.\u0275\u0275inject(d.FormsService))};static \u0275prov=f.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},6758:(D,g,n)=>{n.d(g,{c:()=>T});const d="https://cd-api.co.ke",T={appId:"",production:!1,apiEndpoint:`${d}:3001/api`,sioEndpoint:`${d}:3002`,wsEndpoint:"ws://cd-api.co.ke:3000",wsMode:"wss",pushConfig:{sio:{enabled:!0},wss:{enabled:!1},pusher:{enabled:!0,apiKey:"DtVRY9V5j41KwSxKrd8L_dRijUJh9gVcqwBH5wb96no",options:{cluster:"ap2",forceTLS:!0,userAuthentication:{endpoint:"https://cd-api.co.ke:3002/pusher/auth",transport:"ajax",params:{},headers:{},includeCredentials:!0,customHandler:null},channelAuthorization:{endpoint:"https://cd-api.co.ke:3002/pusher/auth"},authEndpoint:"https://cd-api.co.ke:3002/pusher/auth"}}},CD_PORT:3001,consumerToken:"B0B3DA99-1859-A499-90F6-1E3F69575DCD",clientContext:{entity:"ASDAP",clientAppId:2,consumerToken:"B0B3DA99-1859-A499-90F6-1E3F69575DCD"},USER_RESOURCES:"http://routed-93/user-resources",apiHost:"https://cd-api.co.ke",sioHost:"https://cd-api.co.ke",shellHost:"https://asdap.net",consumer:"",clientAppGuid:"ca0fe39f-92b2-484d-91ef-487d4fc462a2",clientAppId:2,SOCKET_IO_PORT:3002,defaultauth:"cd-auth",mfManifestPath:"/assets/mf.manifest.json",apiOptions:{headers:{"Content-Type":"application/json"}},sioOptions:{path:"/socket.io",transports:["websocket","polling"],secure:!0},firebaseConfig:{apiKey:"",authDomain:"",databaseURL:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""}}},467:(D,g,n)=>{function d(e,M,f,I,T,F,a){try{var u=e[F](a),r=u.value}catch(s){return void f(s)}u.done?M(r):Promise.resolve(r).then(I,T)}function y(e){return function(){var M=this,f=arguments;return new Promise(function(I,T){var F=e.apply(M,f);function a(r){d(F,I,T,a,u,"next",r)}function u(r){d(F,I,T,a,u,"throw",r)}a(void 0)})}}n.d(g,{A:()=>y})}}]);
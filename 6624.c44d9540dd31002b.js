(self.webpackChunkcd_moduleman=self.webpackChunkcd_moduleman||[]).push([[6624],{91275:(D,F,l)=>{l.d(F,{AO:()=>v,CM:()=>g,GV:()=>d,IP:()=>i,J1:()=>s,aQ:()=>p,kV:()=>m,mW:()=>t,z:()=>n});var a=l(30533),e=l(68169),h=l(33635);const f=new e.FormsService,p=[{title:"ID",name:"companyId",dbName:"company_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum"},{title:"Guid",name:"companyGuid",dbName:"company_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Name",name:"companyName",dbName:"company_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(3),a.Validators.maxLength(20),a.Validators.required]]},{title:"Tags",name:"searchTags",dbName:"search_tags",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.textArea,fieldFor:e.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(0),a.Validators.maxLength(300)]]},{title:"CompanyType",name:"companyTypeGuid",dbName:"company_type_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.searchDropDown,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,h.of)([]),selValueField:"companyName",selIndex:"companyTypeGuid",selPlaceholder:"...Choose",data:null},formatt:"text",disabled:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(3),a.Validators.maxLength(42),a.Validators.required]]},{title:"Postal",name:"postalAddress",dbName:"postal_address",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(1),a.Validators.maxLength(20),a.Validators.required]]},{title:"Phone",name:"phone",dbName:"phone",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(8),a.Validators.maxLength(14),a.Validators.required]]},{title:"Email",name:"email",dbName:"email",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.pattern(e.EMAIL_PATTERN),a.Validators.required]]},{title:"Website",name:"website",dbName:"website",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.pattern(e.URL_PATTERN),a.Validators.required]]},{title:"City",name:"city",dbName:"city",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(3),a.Validators.maxLength(20),a.Validators.required]]},{title:"Country",name:"country",dbName:"country",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(3),a.Validators.maxLength(20),a.Validators.required]]},{title:"Location",name:"physicalLocation",dbName:"physical_location",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(1),a.Validators.maxLength(20),a.Validators.required]]},{title:"Logo",name:"logo",dbName:"logo",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(3),a.Validators.maxLength(20),a.Validators.required]]},{title:"Enabled",name:"companyEnabled",dbName:"company_enabled",type:e.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.status,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Action",name:"action",type:e.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:e.ControlType.action,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.action,fieldFor:e.FieldFor.createForm}],Fn:"createCompany"},{title:"Search",name:"iconSearch",type:e.FieldType.any,controls:[],formControlsConfig:["",[]]}],i={data:{},valid:null,ctx:"Sys"},n={token:"",stepTitle:"Create Company",stepItems:{nextButtonId:"stepToMenu"},tabPaneId:"companyInfo",cardTitle:"Company Information",cardTitleDesc:"Fill all information below",module:"Moduleman",controller:"Company",formGroup:null,fields:f.filterByFieldFor(p,e.FieldFor.createForm)},d={name:"Company Wizard",steps:[n]},s={select:["companyId","companyName","companyGuid"],where:{}},t={getFn$:null,selIndex:s.select[0],selValueField:s.select[1],fetchFields:s.select,step:null,token:null,controlName:"companyId"},m={select:["companyTypeId","companyTypeName","companyTypeGuid"],where:{}},g={getFn$:null,selIndex:m.select[2],selValueField:m.select[1],fetchFields:m.select,step:null,token:null,controlName:"companyTypeGuid"},v=[{menuName:"create",menuGuid:"bd9b5bda5ab",navLocation:"/moduleman/company/create",actionType:e.ActionType.navigate},{menuName:"dashboard",menuGuid:"d27294db59c1",navLocation:"/moduleman/company/dashboard",actionType:e.ActionType.navigate}]},6624:(D,F,l)=>{l.r(F),l.d(F,{CompanyModule:()=>P});var a=l(35228),C=l(30533),e=l(83781),b=l(76380),h=l(92618),T=l(59707),f=l(15006),p=l(92526),i=l(68169),n=l(36692),d=l(37011),s=l(91275),t=l(87675);class m{constructor(o,r,c,u,I,M,_){this.aRoute=o,this.router=r,this.svBase=c,this.svNazTable=u,this.svAcl=I,this.svPage=M,this.svSess=_,this.dSource={fields:[],data:[]},this.cardTitle="Company",this.cardBodyId="company",this.searchInputId="inputSearchCompany",this.filter={},this.tpData=i.DEFAULT_TPD,this.ddlData=s.AO,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(o=>{o&&this.svAcl.initComponent(o,this,this.svSess).then(r=>{})})}init(){this.baseModel=new i.BaseModel(s.z.module,s.z.controller),this.svBase.module=s.z.module,this.svBase.controller=s.z.controller,this.baseModel.data.fields=s.aQ.filter(o=>o.fetchable||o.type===i.FieldType.action),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(s.z.controller,"List"),this.sQuery=this.svNazTable.initSQuery(this),this.dsEmittData=this.svNazTable.initEmittData(this)}execQuery(o){this.svNazTable.execQuery(o,this.svBase.getPaged$(this.sQuery,this.baseModel.sess.cd_token),this)}setSearchQuery(o){this.sQuery=o.sQuery,this.execQuery(o)}getSelect(){return this.baseModel.data.fields.filter(o=>o.fetchable).map(o=>o.name)}}m.\u0275fac=function(o){return new(o||m)(t.\u0275\u0275directiveInject(d.ActivatedRoute),t.\u0275\u0275directiveInject(d.Router),t.\u0275\u0275directiveInject(i.BaseService),t.\u0275\u0275directiveInject(n.NazTableService),t.\u0275\u0275directiveInject(i.AclService),t.\u0275\u0275directiveInject(n.PageService),t.\u0275\u0275directiveInject(i.SessService))},m.\u0275cmp=t.\u0275\u0275defineComponent({type:m,selectors:[["app-list"]],viewQuery:function(o,r){if(1&o&&t.\u0275\u0275viewQuery(n.NazTableComponent,5),2&o){let c;t.\u0275\u0275queryRefresh(c=t.\u0275\u0275loadQuery())&&(r.nazTable=c.first)}},decls:1,vars:7,consts:[[3,"baseModel","cardTitle","cardBodyId","searchInputId","tpData","filter","ddlData","searchQuery"]],template:function(o,r){1&o&&(t.\u0275\u0275elementStart(0,"naz-table",0),t.\u0275\u0275listener("searchQuery",function(u){return r.setSearchQuery(u)}),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275property("baseModel",r.baseModel)("cardTitle",r.cardTitle)("cardBodyId",r.cardBodyId)("searchInputId",r.searchInputId)("tpData",r.tpData)("filter",r.filter)("ddlData",r.ddlData)},dependencies:[n.NazTableComponent]});var g=l(15861);class v{constructor(o,r,c,u,I,M,_){this.aRoute=o,this.router=r,this.svBase=c,this.svPage=u,this.svSess=I,this.svAcl=M,this.svNotif=_,this.formConfig={},this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(o=>{this.svAcl.initComponent(o,this,this.svSess).then(r=>{})})}init(){this.baseModel=new i.BaseModel(s.z.module,s.z.controller),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(s.z.controller,"Edit"),this.baseModel.data.subTitle="only allowed fields are editable"}update(o){var r=this;return(0,g.Z)(function*(){r.svBase.update$(o,r.baseModel.token).subscribe(c=>{r.svNotif.emitNotif({pushRecepients:i.DEFAULT_PUSH_RECEPIENTS,pushData:c,emittEvent:"push-notif",triggerEvent:"send-notif",req:null,resp:c})})})()}}v.\u0275fac=function(o){return new(o||v)(t.\u0275\u0275directiveInject(d.ActivatedRoute),t.\u0275\u0275directiveInject(d.Router),t.\u0275\u0275directiveInject(i.BaseService),t.\u0275\u0275directiveInject(n.PageService),t.\u0275\u0275directiveInject(i.SessService),t.\u0275\u0275directiveInject(i.AclService),t.\u0275\u0275directiveInject(i.NotificationService))},v.\u0275cmp=t.\u0275\u0275defineComponent({type:v,selectors:[["app-edit"]],decls:1,vars:2,consts:[[3,"baseModel","pageDescription","formConfig","updateQuery"]],template:function(o,r){1&o&&(t.\u0275\u0275elementStart(0,"naz-table-edit",0),t.\u0275\u0275listener("updateQuery",function(u){return r.update(u)}),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275property("baseModel",r.baseModel)("formConfig",r.formConfig)},dependencies:[n.EditComponent]});class x{constructor(o,r,c,u,I,M,_){this.aRoute=o,this.router=r,this.svBase=c,this.svPage=u,this.svAcl=I,this.svNotif=M,this.svSess=_,this.formConfig={},this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(o=>{this.svAcl.initComponent(o,this,this.svSess).then(r=>{})})}init(){this.baseModel=new i.BaseModel(s.z.module,s.z.controller),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(s.z.controller,"Delete"),this.baseModel.data.subTitle="confirm before delete"}deleteItem(o){var r=this;return(0,g.Z)(function*(){r.svBase.delete$(o,r.baseModel.token).subscribe(c=>{r.svNotif.emitNotif({pushRecepients:i.DEFAULT_PUSH_RECEPIENTS,pushData:c,emittEvent:"push-notif",triggerEvent:"send-notif",req:null,resp:c})})})()}}x.\u0275fac=function(o){return new(o||x)(t.\u0275\u0275directiveInject(d.ActivatedRoute),t.\u0275\u0275directiveInject(d.Router),t.\u0275\u0275directiveInject(i.BaseService),t.\u0275\u0275directiveInject(n.PageService),t.\u0275\u0275directiveInject(i.AclService),t.\u0275\u0275directiveInject(i.NotificationService),t.\u0275\u0275directiveInject(i.SessService))},x.\u0275cmp=t.\u0275\u0275defineComponent({type:x,selectors:[["app-delete"]],decls:1,vars:2,consts:[[3,"baseModel","pageDescription","formConfig","deleteQuery"]],template:function(o,r){1&o&&(t.\u0275\u0275elementStart(0,"naz-table-delete",0),t.\u0275\u0275listener("deleteQuery",function(u){return r.deleteItem(u)}),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275property("baseModel",r.baseModel)("formConfig",r.formConfig)},dependencies:[n.DeleteComponent]});var A=l(65037);class E{constructor(){}}E.\u0275fac=function(o){return new(o||E)},E.\u0275prov=t.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"});var O=l(95855);class N{constructor(o,r,c,u){this.svBase=o,this.svModule=r,this.svCompany=c,this.svModman=u}loadDdls(o,r){var c=this;return(0,g.Z)(function*(){A.tL.token=o.token,s.CM.token=o.token,s.CM.step=r,s.CM.controlName="companyTypeGuid",console.log("cd-moduleman/CompanyFrontService::loadDdls()/companyTypeGetQuery:",s.kV),s.CM.getFn$=c.svBase.getType$(s.kV,o.token),yield c.svModman.setDdl$(yield s.CM).subscribe(u=>{console.log("cd-moduleman/CompanyFrontService::loadDdls()/ret(companyTypes):",u),r.fields.forEach(I=>{"companyTypeGuid"===I.name&&(I.ddlInfo.data=u)})})})()}}N.\u0275fac=function(o){return new(o||N)(t.\u0275\u0275inject(i.BaseService),t.\u0275\u0275inject(i.ModuleService),t.\u0275\u0275inject(E),t.\u0275\u0275inject(O.v))},N.\u0275prov=t.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"});class L{constructor(o,r,c,u,I,M,_,V,B,w,z,U){this.aRoute=o,this.router=r,this.svCompanyFront=c,this.svAcl=u,this.svForm=I,this.svNotif=M,this.fb=_,this.svForms=V,this.svPage=B,this.svPush=w,this.svBase=z,this.svSess=U,this.newCompany=s.IP,this.wizardModel=s.GV,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(o=>{this.svAcl.initComponent(o,this,this.svSess).then(r=>{r&&(this.svPush.init(this),this.baseModel.data.step.token=this.baseModel.token)})})}ngAfterViewInit(){this.svCompanyFront.loadDdls(this.baseModel,this.baseModel.data.step).then(o=>{console.log("company/CreateComponent::ngAfterViewInit()/this.baseModel.data.step:",this.baseModel.data.step)})}init(){this.baseModel=new i.BaseModel(s.z.module,s.z.controller),this.baseModel.data.fields=this.svForms.filterByFieldFor(s.aQ,i.FieldFor.createForm),this.baseModel.data.wizardModel=s.GV,this.baseModel.data.step=this.svForm.filterStepsByController(this.baseModel.data.wizardModel,s.z.controller)[0],this.baseModel.data.form=this.fb.group(this.svForm.getFormControlConfig(s.aQ)),this.baseModel.data.step.formGroup=this.baseModel.data.form,this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(s.z.controller,"Create")}setSelectedIcon(o){this.svForm.setSelectedIcon(o,this.baseModel,this.baseModel.data.step)}save(o){let r;switch(o.controller){case"module":case"menu":break;case"company":r=this.svBase.create$(this.newCompany,this.baseModel.token),this.svForm.saveForm(o,this.newCompany,r,this.svPush.pushEnvelop,this.svNotif)}}finishFunction(){console.log("finishing!!")}}L.\u0275fac=function(o){return new(o||L)(t.\u0275\u0275directiveInject(d.ActivatedRoute),t.\u0275\u0275directiveInject(d.Router),t.\u0275\u0275directiveInject(N),t.\u0275\u0275directiveInject(i.AclService),t.\u0275\u0275directiveInject(i.FormsService),t.\u0275\u0275directiveInject(i.NotificationService),t.\u0275\u0275directiveInject(C.FormBuilder),t.\u0275\u0275directiveInject(i.FormsService),t.\u0275\u0275directiveInject(n.PageService),t.\u0275\u0275directiveInject(i.CdPushService),t.\u0275\u0275directiveInject(i.BaseService),t.\u0275\u0275directiveInject(i.SessService))},L.\u0275cmp=t.\u0275\u0275defineComponent({type:L,selectors:[["app-create"]],decls:1,vars:2,consts:[[3,"baseModel","wizardModel","saveEmitter","relaySelIconEmitter"]],template:function(o,r){1&o&&(t.\u0275\u0275elementStart(0,"naz-table-create",0),t.\u0275\u0275listener("saveEmitter",function(u){return r.save(u)})("relaySelIconEmitter",function(u){return r.setSelectedIcon(u)}),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275property("baseModel",r.baseModel)("wizardModel",r.wizardModel)},dependencies:[n.CreateComponent]});var R=l(86106);const j=[{path:"list",component:m},{path:"edit",component:v},{path:"delete",component:x},{path:"create",component:L},{path:"dashboard",component:R.M}];class S{}S.\u0275fac=function(o){return new(o||S)},S.\u0275mod=t.\u0275\u0275defineNgModule({type:S}),S.\u0275inj=t.\u0275\u0275defineInjector({imports:[d.RouterModule.forChild(j),d.RouterModule]});class P{}P.\u0275fac=function(o){return new(o||P)},P.\u0275mod=t.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=t.\u0275\u0275defineInjector({imports:[a.CommonModule,C.FormsModule,C.ReactiveFormsModule,b.NgbNavModule,b.NgbDropdownModule,b.NgbTooltipModule,b.NgbAccordionModule,n.NazUiModule,n.NazTableModule,n.NazCreateModule,n.NazEditModule,n.NazDeleteModule,h.Ng2SearchPipeModule,T.ArchwizardModule,f.NgToggleModule,S,e.NgSelectModule,i.BaseModule.forChild(p.N),i.CdPushModule.forChild(p.N)]})},76679:(D,F,l)=>{l.d(F,{AO:()=>g,Cq:()=>s,NG:()=>i,hA:()=>p,i0:()=>t,kx:()=>n,ni:()=>m,pt:()=>d});var a=l(30533),e=l(68169),h=l(33635);const f=new e.FormsService,p=[{title:"ID",name:"menuId",dbName:"menu_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"number",disabled:!0,formControlsConfig:["",[]]},{title:"Guid",name:"menuGuid",dbName:"menu_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Label",name:"menuLabel",dbName:"menu_label",type:e.FieldType.string,fetchable:!0,updateable:!1,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Name",name:"menuName",dbName:"menu_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(3),a.Validators.maxLength(25),a.Validators.required]]},{title:"MenuParent",name:"menuParentId",dbName:"menu_parent_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.searchDropDown,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,h.of)([]),selValueField:"menuName",selIndex:"menuId",selPlaceholder:"...Choose",data:null},formatt:"number",disabled:!0,savable:!0,formControlsConfig:["",[a.Validators.required]]},{title:"ModuleParent",name:"moduleId",dbName:"module_id",primaryField:"menuParent",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.searchDropDown,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,h.of)([]),selValueField:"moduleName",selIndex:"moduleId",selPlaceholder:"...Choose",data:null},formatt:"number",disabled:!0,savable:!0,formControlsConfig:["",[a.Validators.required]]},{title:"Description",name:"menuDescription",dbName:"menu_description",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.textArea,fieldFor:e.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(0),a.Validators.maxLength(300)]]},{title:"Icon",name:"menuIcon",dbName:"menu_icon",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.ddlIcons,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,h.of)([]),selValueField:"iconName",selIndex:"iconId",selPlaceholder:"...choose",ddlIconId:"iconDdlIdX",searchInputId:"searchInputIdX",searchInputName:"searchInputNameX",selectedValue:"",data:null},formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(2),a.Validators.maxLength(50),a.Validators.required]]},{title:"Path",name:"path",dbName:"path",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm}],formatt:"text",formControlsConfig:["",[a.Validators.minLength(3),a.Validators.maxLength(100),a.Validators.required]]},{title:"Action",name:"action",type:e.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:e.ControlType.action,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.action,fieldFor:e.FieldFor.createForm}],Fn:"createMenu"},{title:"Search",name:"iconSearch",type:e.FieldType.any,controls:[],formControlsConfig:["",[]]}],i={data:{},cdObj:null,valid:null,ctx:"Sys"},n=[{toReplace:"menuLabel",replaceWith:"menuName"}],d={token:"",stepTitle:"Create Menu",stepItems:{prevButtonId:"stepToModule",lastButtonId:"endSteps"},tabPaneId:"menuInfo",cardTitle:"Menu Information",cardTitleDesc:"Every module has to have at least one menu item. You can use the + button to add more items.",module:"moduleman",controller:"menu",formGroup:null,fields:f.filterByFieldFor(p,e.FieldFor.createForm)},s={name:"Menu Wizard",steps:[d]},t={select:["menuId","menuName","menuGuid"],where:{}},m={getFn$:null,selIndex:t.select[0],selValueField:t.select[1],fetchFields:t.select,step:null,token:null,controlName:"menuParentId"},g=[{menuName:"create",menuGuid:"bd9b5bda6ab",navLocation:"/moduleman/menu/create",actionType:e.ActionType.navigate},{menuName:"dashboard",menuGuid:"d27294db69c1",navLocation:"/moduleman/menu/dashboard",actionType:e.ActionType.navigate}]},65037:(D,F,l)=>{l.d(F,{AO:()=>t,GZ:()=>s,Qx:()=>f,Rf:()=>i,c_:()=>d,qh:()=>m,tL:()=>g,vk:()=>p});var a=l(30533),e=l(68169),h=l(76679);const T=new e.FormsService,f=[{title:"ID",name:"moduleId",dbName:"module_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"number",disabled:!0},{title:"Guid",name:"moduleGuid",dbName:"module_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Name",name:"moduleName",dbName:"module_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.minLength(4),a.Validators.maxLength(20),a.Validators.required]]},{title:"Description",name:"moduleDescription",dbName:"module_description",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.textArea,fieldFor:e.FieldFor.createForm}],formatt:"textArea",savable:!0,formControlsConfig:["",[a.Validators.minLength(0),a.Validators.maxLength(300)]]},{title:"Enabled",name:"moduleEnabled",dbName:"module_enabled",type:e.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.status,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Sys",name:"isSysModule",dbName:"is_sys_module",type:e.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.status,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[a.Validators.required]]},{title:"System Module",name:"isSys",controls:[{controlType:e.ControlType.toggleSwitch,fieldFor:e.FieldFor.createForm}],primaryField:"isSysModule",formControlsConfig:["",[]]},{title:"App Module",name:"isApp",controls:[{controlType:e.ControlType.toggleSwitch,fieldFor:e.FieldFor.createForm}],primaryField:"isSysModule",formControlsConfig:["",[]]},{title:"Action",name:"action",type:e.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:e.ControlType.action,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.action,fieldFor:e.FieldFor.tableDisplay}]}],p={controllerName:"isSysModule",selectedItem:{index:0,optControlId:"",value:"",selected:!1},controlTypes:e.ControlType.toggleSwitch,options:[{index:0,optControlId:"isSys",value:"isSys",selected:!0},{index:1,optControlId:"isApp",value:"isApp",selected:!1}]},i={valid:null,data:{},ctx:"Sys"},d={token:"",stepTitle:"Create Module",stepItems:{nextButtonId:"stepToMenu"},tabPaneId:"moduleInfo",cardTitle:"Module Information",cardTitleDesc:"Fill all information below",module:"moduleman",controller:"module",formGroup:null,fields:T.filterByFieldFor(f,e.FieldFor.createForm)},s={name:"Module Wizard",steps:[d,h.pt]},t=[{menuName:"create",menuGuid:"bd9b5bda5ab",navLocation:"/moduleman/module/create",actionType:e.ActionType.navigate},{menuName:"dashboard",menuGuid:"d27294db59c1",navLocation:"/moduleman/module/dashboard",actionType:e.ActionType.navigate}],m={select:["moduleId","moduleName","moduleGuid"],where:{}},g={getFn$:null,selIndex:m.select[0],selValueField:m.select[1],fetchFields:m.select,step:null,token:null,controlName:"moduleId"}},95855:(D,F,l)=>{l.d(F,{v:()=>p});var a=l(33635),e=l(87675),h=l(68169);class p{constructor(n,d,s){this.svMenu=n,this.svNotif=d,this.svForm=s,this.ddlData={config:{suppressScrollX:!0,wheelSpeed:.3},header:{title:{lable:"Notifications",cls:"",action:null},sideLink:{lable:"View All",cls:"",action:null}},footer:{label:"View All",icon:"",action:null},data:[{label:"item 1",description:"If several languages coalesce the grammar",time:"3 min ago"},{label:"item 2",description:"It will seem like simplified English",time:"1 hr ago"},{label:"item 3",description:"If several languages coalesce the grammar",time:"4 hr ago"}]},this.pushEnvelop={pushRecepients:[],pushData:null,emittEvent:"push-notif",triggerEvent:"send-notif",req:null,resp:null},this.numericNumberReg1="^-?[0-9]\\d*(\\.\\d{1,2})?$",this.numericNumberReg2="/^[0-9]d*$/",this.numericNumberReg3=new RegExp(/^-?[0-9]\\d*(\\.\\d{1,2})?$/,"i"),this.numericNumberReg4=new RegExp(/^[0-9]\d*$/,"i")}setIconsData$(n,d){n.fields.map((s,t)=>{s.name===d&&(n.fields[t].ddlInfo.selData$=(0,a.of)(this.ddlData),n.fields[t].ddlInfo.selIndex="iconId",n.fields[t].ddlInfo.selValueField="iconName",n.fields[t].ddlInfo.selPlaceholder="...Choose")})}setDdl$(n){if(n.token){const d=new a.Subject;let s=[];return n.getFn$.subscribe(t=>{const m=t;console.log("ModulemanService::setDdl$()/response:",m),m.app_state.success?(s=m.data.items,n.step.fields.map((g,v)=>{g.name===n.controlName&&(n.step.fields[v].ddlInfo.selData$=(0,a.of)(m.data.items),n.step.fields[v].ddlInfo.selIndex=n.selIndex,n.step.fields[v].ddlInfo.selValueField=n.selValueField,n.step.fields[v].ddlInfo.selPlaceholder="...Choose")}),d.next(s)):(this.pushEnvelop.pushData=m,this.pushEnvelop.resp=m,this.svNotif.emitNotif(this.pushEnvelop),d.next(s))}),d.asObservable()}return(0,a.of)([])}}p.\u0275fac=function(n){return new(n||p)(e.\u0275\u0275inject(h.MenuService),e.\u0275\u0275inject(h.NotificationService),e.\u0275\u0275inject(h.FormsService))},p.\u0275prov=e.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"})},92526:(D,F,l)=>{l.d(F,{N:()=>f});const a="https://cd-api.co.ke",f={appId:"",production:!1,apiEndpoint:`${a}/api`,sioEndpoint:`${a}:3002`,wsEndpoint:"ws://cd-api.co.ke:3000",wsMode:"wss",pushConfig:{sio:{enabled:!0},wss:{enabled:!1},pusher:{enabled:!0,apiKey:"DtVRY9V5j41KwSxKrd8L_dRijUJh9gVcqwBH5wb96no",options:{cluster:"ap2",forceTLS:!0,userAuthentication:{endpoint:"https://cd-api.co.ke:3002/pusher/auth",transport:"ajax",params:{},headers:{},includeCredentials:!0,customHandler:null},channelAuthorization:{endpoint:"https://cd-api.co.ke:3002/pusher/auth"},authEndpoint:"https://cd-api.co.ke:3002/pusher/auth"}}},CD_PORT:3001,consumerToken:"B0B3DA99-1859-A499-90F6-1E3F69575DCD",USER_RESOURCES:"http://routed-93/user-resources",apiHost:"https://cd-api.co.ke",sioHost:"https://cd-api.co.ke",shellHost:"https://cd-shell.asdap.africa",consumer:"",clientAppGuid:"ca0fe39f-92b2-484d-91ef-487d4fc462a2",clientAppId:2,SOCKET_IO_PORT:3002,defaultauth:"cd-auth",mfManifestPath:"/assets/mf.manifest.json",apiOptions:{headers:{"Content-Type":"application/json"}},sioOptions:{path:"/socket.io",transports:["websocket","polling"],secure:!0},firebaseConfig:{apiKey:"",authDomain:"",databaseURL:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""}}},15861:(D,F,l)=>{function a(e,b,h,T,f,p,i){try{var n=e[p](i),d=n.value}catch(s){return void h(s)}n.done?b(d):Promise.resolve(d).then(T,f)}function C(e){return function(){var b=this,h=arguments;return new Promise(function(T,f){var p=e.apply(b,h);function i(d){a(p,T,f,i,n,"next",d)}function n(d){a(p,T,f,i,n,"throw",d)}i(void 0)})}}l.d(F,{Z:()=>C})}}]);
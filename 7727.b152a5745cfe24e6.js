(self.webpackChunkcd_moduleman=self.webpackChunkcd_moduleman||[]).push([[7727],{7727:(N,I,n)=>{n.r(I),n.d(I,{CdObjModule:()=>z});var i=n(9354),u=n(2952),e=n(6393),C=n(1475),f=n(4939),g=n(5425),F=n(8351),T=n(6758),t=n(4178),p=n(777),r=n(5662),b=n(4866);const v=new t.FormsService,y=[{title:"ID",name:"cdObjId",dbName:"cd_obj_id",type:t.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay}],formatt:"alphanum"},{title:"Guid",name:"cdObjGuid",dbName:"cd_obj_guid",type:t.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Name",name:"cdObjName",dbName:"cd_obj_name",type:t.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.createForm},{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[u.Validators.minLength(3),u.Validators.maxLength(20),u.Validators.required]]},{title:"CdObjType",name:"cdObjTypeGuid",dbName:"cd_obj_type_guid",type:t.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.searchDropDown,fieldFor:t.FieldFor.createForm}],ddlInfo:{selData$:(0,b.of)([]),selValueField:"cdObjName",selIndex:"cdObjTypeGuid",selPlaceholder:"...Choose",data:null},formatt:"number",disabled:!0,savable:!0,formControlsConfig:["",[u.Validators.minLength(3),u.Validators.maxLength(42),u.Validators.required]]},{title:"ParentModule",name:"parentModuleGuid",dbName:"parent_module_guid",type:t.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.searchDropDown,fieldFor:t.FieldFor.createForm}],ddlInfo:{selData$:(0,b.of)([]),selValueField:"menuName",selIndex:"menuGuid",selPlaceholder:"...Choose",data:null},formatt:"number",disabled:!0,savable:!0,formControlsConfig:["",[u.Validators.minLength(3),u.Validators.maxLength(42),u.Validators.required]]},{title:"AliasName",name:"cdObjDispName",dbName:"cd_obj_disp_name",type:t.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.createForm},{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[u.Validators.minLength(3),u.Validators.maxLength(14),u.Validators.required]]},{title:"Icon",name:"icon",dbName:"icon",type:t.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.text,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.ddlIcons,fieldFor:t.FieldFor.createForm}],ddlInfo:{selData$:(0,b.of)([]),selValueField:"iconName",selIndex:"iconId",selPlaceholder:"...choose",ddlIconId:"iconDdlIdX",searchInputId:"searchInputIdX",searchInputName:"searchInputNameX",selectedValue:"",data:null},formatt:"text",savable:!0,formControlsConfig:["",[u.Validators.minLength(2),u.Validators.maxLength(20),u.Validators.required]]},{title:"Show Icon",name:"showIcon",dbName:"show_icon",type:t.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.status,fieldFor:t.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Enabled",name:"cdObjEnabled",dbName:"cd_obj_enabled",type:t.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:t.ControlType.status,fieldFor:t.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Action",name:"action",type:t.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:t.ControlType.action,fieldFor:t.FieldFor.tableDisplay},{controlType:t.ControlType.action,fieldFor:t.FieldFor.createForm}],Fn:"createCdObj"},{title:"Search",name:"iconSearch",type:t.FieldType.any,controls:[],formControlsConfig:["",[]]}],M={data:{},valid:null,ctx:"Sys"},c={token:"",stepTitle:"Create CdObj",stepItems:{nextButtonId:"stepToMenu"},tabPaneId:"cdObjInfo",cardTitle:"CdObj Information",cardTitleDesc:"Fill all information below",module:"Moduleman",controller:"CdObj",formGroup:null,fields:v.filterByFieldFor(y,t.FieldFor.createForm)},D={name:"CdObj Wizard",steps:[c]},O={select:["cdObjTypeId","cdObjTypeName","cdObjTypeGuid"],where:{}},j={getFn$:null,selIndex:O.select[2],selValueField:O.select[1],fetchFields:O.select,step:null,token:null,controlName:"cdObjTypeGuid"},L=[{menuName:"create",menuGuid:"bd9b5bda5ab",navLocation:"/moduleman/cd-obj/create",actionType:t.ActionType.navigate},{menuName:"dashboard",menuGuid:"d27294db59c1",navLocation:"/moduleman/cd-obj/dashboard",actionType:t.ActionType.navigate}];var o=n(2264);let x=(()=>{class d{aRoute;router;svBase;svNazTable;svAcl;svPage;svSess;baseModel;dSource={fields:[],data:[]};cardTitle="CdObj";cardBodyId="cdObj";searchInputId="inputSearchCdObj";editRoute="/moduleman/cd-obj/edit";deleteRoute="/moduleman/cd-obj/delete";createRoute="/moduleman/cd-obj/create";filter={};nazTable;dsEmittData;sQuery;tpData=t.DEFAULT_TPD;ddlData=L;constructor(a,l,s,m,h,E,S){this.aRoute=a,this.router=l,this.svBase=s,this.svNazTable=m,this.svAcl=h,this.svPage=E,this.svSess=S,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(a=>{a&&this.svAcl.initComponent(a,this,this.svSess).then(l=>{})})}init(){this.baseModel=new t.BaseModel(c.module,c.controller),this.svBase.module=c.module,this.svBase.controller=c.controller,this.baseModel.data.fields=y.filter(a=>a.fetchable||a.type===t.FieldType.action),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(c.controller,"List"),this.sQuery=this.svNazTable.initSQuery(this),this.dsEmittData=this.svNazTable.initEmittData(this)}execQuery(a){this.svNazTable.execQuery(a,this.svBase.getPaged$(this.sQuery,this.baseModel.sess.cd_token),this)}setSearchQuery(a){this.sQuery=a.sQuery,this.execQuery(a)}getSelect(){return this.baseModel.data.fields.filter(a=>a.fetchable).map(a=>a.name)}static \u0275fac=function(l){return new(l||d)(o.\u0275\u0275directiveInject(r.ActivatedRoute),o.\u0275\u0275directiveInject(r.Router),o.\u0275\u0275directiveInject(t.BaseService),o.\u0275\u0275directiveInject(p.NazTableService),o.\u0275\u0275directiveInject(t.AclService),o.\u0275\u0275directiveInject(p.PageService),o.\u0275\u0275directiveInject(t.SessService))};static \u0275cmp=o.\u0275\u0275defineComponent({type:d,selectors:[["app-list"]],viewQuery:function(l,s){if(1&l&&o.\u0275\u0275viewQuery(p.NazTableComponent,5),2&l){let m;o.\u0275\u0275queryRefresh(m=o.\u0275\u0275loadQuery())&&(s.nazTable=m.first)}},decls:1,vars:9,consts:[[3,"searchQuery","baseModel","cardTitle","cardBodyId","searchInputId","tpData","filter","ddlData","editRoute","deleteRoute"]],template:function(l,s){1&l&&(o.\u0275\u0275elementStart(0,"naz-table",0),o.\u0275\u0275listener("searchQuery",function(h){return s.setSearchQuery(h)}),o.\u0275\u0275elementEnd()),2&l&&o.\u0275\u0275property("baseModel",s.baseModel)("cardTitle",s.cardTitle)("cardBodyId",s.cardBodyId)("searchInputId",s.searchInputId)("tpData",s.tpData)("filter",s.filter)("ddlData",s.ddlData)("editRoute",s.editRoute)("deleteRoute",s.deleteRoute)}})}return d})();var A=n(467);let w=(()=>{class d{aRoute;svBase;svPage;svSess;svAcl;svNotif;baseModel;formConfig={};backRoute="/moduleman/cd-obj/list";updateQuery;constructor(a,l,s,m,h,E){this.aRoute=a,this.svBase=l,this.svPage=s,this.svSess=m,this.svAcl=h,this.svNotif=E,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(a=>{this.svAcl.initComponent(a,this,this.svSess).then(l=>{})})}init(){this.baseModel=new t.BaseModel(c.module,c.controller),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(c.controller,"Edit"),this.baseModel.data.subTitle="only allowed fields are editable"}update(a){var l=this;return(0,A.A)(function*(){l.svBase.update$(a,l.baseModel.token).subscribe(s=>{l.svNotif.emitNotif({pushData:{appId:"",appSockets:[],pushGuid:"",m:null,pushRecepients:t.DEFAULT_PUSH_RECEPIENTS,emittEvent:"push-notif",triggerEvent:"send-notif",token:"",commTrack:{initTime:null,relayTime:null,pushed:!1,pushTime:null,relayed:!1,deliveryTime:null,delivered:!1,completed:!1,completedTime:null,cached:!1,cachedTime:null,saved:!1,savedTime:null},isNotification:null,isAppInit:null},req:null,resp:null})})})()}static \u0275fac=function(l){return new(l||d)(o.\u0275\u0275directiveInject(r.ActivatedRoute),o.\u0275\u0275directiveInject(t.BaseService),o.\u0275\u0275directiveInject(p.PageService),o.\u0275\u0275directiveInject(t.SessService),o.\u0275\u0275directiveInject(t.AclService),o.\u0275\u0275directiveInject(t.NotificationService))};static \u0275cmp=o.\u0275\u0275defineComponent({type:d,selectors:[["app-edit"]],decls:1,vars:3,consts:[[3,"updateQuery","baseModel","pageDescription","formConfig","backRoute"]],template:function(l,s){1&l&&(o.\u0275\u0275elementStart(0,"naz-table-edit",0),o.\u0275\u0275listener("updateQuery",function(h){return s.update(h)}),o.\u0275\u0275elementEnd()),2&l&&o.\u0275\u0275property("baseModel",s.baseModel)("formConfig",s.formConfig)("backRoute",s.backRoute)},dependencies:[p.EditComponent]})}return d})(),B=(()=>{class d{aRoute;router;svBase;svPage;svAcl;svNotif;svSess;baseModel;formConfig={};backRoute="/moduleman/cd-obj/list";updateQuery;constructor(a,l,s,m,h,E,S){this.aRoute=a,this.router=l,this.svBase=s,this.svPage=m,this.svAcl=h,this.svNotif=E,this.svSess=S,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(a=>{this.svAcl.initComponent(a,this,this.svSess).then(l=>{})})}init(){this.baseModel=new t.BaseModel(c.module,c.controller),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(c.controller,"Delete"),this.baseModel.data.subTitle="confirm before delete"}deleteItem(a){var l=this;return(0,A.A)(function*(){l.svBase.delete$(a,l.baseModel.token).subscribe(s=>{l.svNotif.emitNotif({pushData:{appId:"",appSockets:[],pushGuid:"",m:null,pushRecepients:t.DEFAULT_PUSH_RECEPIENTS,emittEvent:"push-notif",triggerEvent:"send-notif",token:"",commTrack:{initTime:null,relayTime:null,pushed:!1,pushTime:null,relayed:!1,deliveryTime:null,delivered:!1,completed:!1,completedTime:null,cached:!1,cachedTime:null,saved:!1,savedTime:null},isNotification:null,isAppInit:null},req:null,resp:null})})})()}static \u0275fac=function(l){return new(l||d)(o.\u0275\u0275directiveInject(r.ActivatedRoute),o.\u0275\u0275directiveInject(r.Router),o.\u0275\u0275directiveInject(t.BaseService),o.\u0275\u0275directiveInject(p.PageService),o.\u0275\u0275directiveInject(t.AclService),o.\u0275\u0275directiveInject(t.NotificationService),o.\u0275\u0275directiveInject(t.SessService))};static \u0275cmp=o.\u0275\u0275defineComponent({type:d,selectors:[["app-delete"]],decls:1,vars:3,consts:[[3,"deleteQuery","baseModel","pageDescription","formConfig","backRoute"]],template:function(l,s){1&l&&(o.\u0275\u0275elementStart(0,"naz-table-delete",0),o.\u0275\u0275listener("deleteQuery",function(h){return s.deleteItem(h)}),o.\u0275\u0275elementEnd()),2&l&&o.\u0275\u0275property("baseModel",s.baseModel)("formConfig",s.formConfig)("backRoute",s.backRoute)},dependencies:[p.DeleteComponent]})}return d})();var _=n(327),R=n(8788);let V=(()=>{class d{svCdObj;svModule;svModman;constructor(a,l,s){this.svCdObj=a,this.svModule=l,this.svModman=s}loadDdls(a,l){var s=this;return(0,A.A)(function*(){_.M9.token=a.token,_.M9.step=l,_.M9.controlName="parentModuleGuid",_.M9.getFn$=s.svModule.getModule$(_.lw,a.token),yield s.svModman.setDdl$(yield _.M9).subscribe(m=>{console.log("menu/CdObjModService::loadDdls()/ret(modules):",m),l.fields.forEach(h=>{"parentModuleGuid"===h.name&&(h.ddlInfo.data=m)})}),j.token=a.token,j.step=l,j.controlName="cdObjTypeGuid",j.getFn$=s.svCdObj.getCdObjType$(O,a.token),yield s.svModman.setDdl$(yield j).subscribe(m=>{console.log("menu/CdObjModService::loadDdls()/ret(cdObjTypes):",m),l.fields.forEach(h=>{"cdObjTypeGuid"===h.name&&(h.ddlInfo.data=m)})})})()}static \u0275fac=function(l){return new(l||d)(o.\u0275\u0275inject(t.CdObjService),o.\u0275\u0275inject(t.ModuleService),o.\u0275\u0275inject(R.O))};static \u0275prov=o.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})();const $=[{path:"list",component:x},{path:"edit",component:w},{path:"delete",component:B},{path:"create",component:(()=>{class d{aRoute;router;svCdObjFront;svAcl;svForm;svNotif;fb;svForms;svModman;svPage;svPush;svBase;svSess;baseModel;cdObjStep;newCdObj=M;cdObjData;wizardModel=D;newModule=_.VP;moduleStep;menuData;constructor(a,l,s,m,h,E,S,Q,W,K,H,X,J){this.aRoute=a,this.router=l,this.svCdObjFront=s,this.svAcl=m,this.svForm=h,this.svNotif=E,this.fb=S,this.svForms=Q,this.svModman=W,this.svPage=K,this.svPush=H,this.svBase=X,this.svSess=J,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(a=>{this.svAcl.initComponent(a,this,this.svSess).then(l=>{l&&(this.svPush.init(this),this.baseModel.data.step.token=this.baseModel.token)})})}ngAfterViewInit(){this.svCdObjFront.loadDdls(this.baseModel,this.baseModel.data.step).then(a=>{console.log("cdObj/CreateComponent::ngAfterViewInit()/this.baseModel.data.step:",this.baseModel.data.step)}),this.svModman.setIconsData$(this.baseModel.data.step,"icon")}init(){this.baseModel=new t.BaseModel(c.module,c.controller),this.baseModel.data.fields=this.svForms.filterByFieldFor(y,t.FieldFor.createForm),this.baseModel.data.wizardModel=D,this.baseModel.data.step=this.svForm.filterStepsByController(this.baseModel.data.wizardModel,c.controller)[0],this.baseModel.data.form=this.fb.group(this.svForm.getFormControlConfig(y)),this.baseModel.data.step.formGroup=this.baseModel.data.form,this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(c.controller,"Create")}setSelectedIcon(a){this.svForm.setSelectedIcon(a,this.baseModel,this.baseModel.data.step)}save(a){let l;switch(a.controller){case"module":case"menu":break;case"cdObj":l=this.svBase.create$(this.newCdObj,this.baseModel.token),this.svForm.saveForm(a,this.newCdObj,l,this.svPush.pushEnvelop,this.svNotif)}}finishFunction(){console.log("finishing!!")}static \u0275fac=function(l){return new(l||d)(o.\u0275\u0275directiveInject(r.ActivatedRoute),o.\u0275\u0275directiveInject(r.Router),o.\u0275\u0275directiveInject(V),o.\u0275\u0275directiveInject(t.AclService),o.\u0275\u0275directiveInject(t.FormsService),o.\u0275\u0275directiveInject(t.NotificationService),o.\u0275\u0275directiveInject(u.FormBuilder),o.\u0275\u0275directiveInject(t.FormsService),o.\u0275\u0275directiveInject(R.O),o.\u0275\u0275directiveInject(p.PageService),o.\u0275\u0275directiveInject(t.CdPushService),o.\u0275\u0275directiveInject(t.BaseService),o.\u0275\u0275directiveInject(t.SessService))};static \u0275cmp=o.\u0275\u0275defineComponent({type:d,selectors:[["app-create"]],decls:1,vars:2,consts:[[3,"saveEmitter","relaySelIconEmitter","baseModel","wizardModel"]],template:function(l,s){1&l&&(o.\u0275\u0275elementStart(0,"naz-table-create",0),o.\u0275\u0275listener("saveEmitter",function(h){return s.save(h)})("relaySelIconEmitter",function(h){return s.setSelectedIcon(h)}),o.\u0275\u0275elementEnd()),2&l&&o.\u0275\u0275property("baseModel",s.baseModel)("wizardModel",s.wizardModel)},dependencies:[p.CreateComponent]})}return d})()},{path:"dashboard",component:n(4287).S}];let k=(()=>{class d{static \u0275fac=function(l){return new(l||d)};static \u0275mod=o.\u0275\u0275defineNgModule({type:d});static \u0275inj=o.\u0275\u0275defineInjector({imports:[r.RouterModule.forChild($),r.RouterModule]})}return d})(),z=(()=>{class d{static \u0275fac=function(l){return new(l||d)};static \u0275mod=o.\u0275\u0275defineNgModule({type:d});static \u0275inj=o.\u0275\u0275defineInjector({imports:[i.CommonModule,u.FormsModule,u.ReactiveFormsModule,C.NgbNavModule,C.NgbDropdownModule,C.NgbTooltipModule,C.NgbAccordionModule,p.NazUiModule,p.NazTableModule,p.NazCreateModule,p.NazEditModule,p.NazDeleteModule,f.FilterPipeModule,g.ArchwizardModule,F.NgToggleModule,k,e.NgSelectModule,t.BaseModule.forChild(T.c),t.CdPushModule.forChild(T.c)]})}return d})()},3425:(N,I,n)=>{n.d(I,{AV:()=>t,Bx:()=>y,EG:()=>v,Fl:()=>M,PG:()=>r,gb:()=>p,v4:()=>T,yr:()=>b});var i=n(2952),e=n(4178),f=n(4866);const F=new e.FormsService,T=[{title:"ID",name:"menuId",dbName:"menu_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"number",disabled:!0,formControlsConfig:["",[]]},{title:"Guid",name:"menuGuid",dbName:"menu_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Label",name:"menuLabel",dbName:"menu_label",type:e.FieldType.string,fetchable:!0,updateable:!1,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Name",name:"menuName",dbName:"menu_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[i.Validators.minLength(3),i.Validators.maxLength(25),i.Validators.required]]},{title:"MenuParent",name:"menuParentId",dbName:"menu_parent_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.searchDropDown,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,f.of)([]),selValueField:"menuName",selIndex:"menuId",selPlaceholder:"...Choose",data:null},formatt:"number",disabled:!0,savable:!0,formControlsConfig:["",[i.Validators.required]]},{title:"ModuleParent",name:"moduleId",dbName:"module_id",primaryField:"menuParent",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.searchDropDown,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,f.of)([]),selValueField:"moduleName",selIndex:"moduleId",selPlaceholder:"...Choose",data:null},formatt:"number",disabled:!0,savable:!0,formControlsConfig:["",[i.Validators.required]]},{title:"Description",name:"menuDescription",dbName:"menu_description",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.textArea,fieldFor:e.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[i.Validators.minLength(0),i.Validators.maxLength(300)]]},{title:"Icon",name:"menuIcon",dbName:"menu_icon",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.ddlIcons,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,f.of)([]),selValueField:"iconName",selIndex:"iconId",selPlaceholder:"...choose",ddlIconId:"iconDdlIdX",searchInputId:"searchInputIdX",searchInputName:"searchInputNameX",selectedValue:"",data:null},formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[i.Validators.minLength(2),i.Validators.maxLength(50),i.Validators.required]]},{title:"Path",name:"path",dbName:"path",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm}],formatt:"text",formControlsConfig:["",[i.Validators.minLength(3),i.Validators.maxLength(100),i.Validators.required]]},{title:"Action",name:"action",type:e.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:e.ControlType.action,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.action,fieldFor:e.FieldFor.createForm}],Fn:"createMenu"},{title:"Search",name:"iconSearch",type:e.FieldType.any,controls:[],formControlsConfig:["",[]]}],t={data:{},cdObj:null,valid:null,ctx:"Sys"},p=[{toReplace:"menuLabel",replaceWith:"menuName"}],r={token:"",stepTitle:"Create Menu",stepItems:{prevButtonId:"stepToModule",lastButtonId:"endSteps"},tabPaneId:"menuInfo",cardTitle:"Menu Information",cardTitleDesc:"Every module has to have at least one menu item. You can use the + button to add more items.",module:"moduleman",controller:"menu",formGroup:null,fields:F.filterByFieldFor(T,e.FieldFor.createForm)},b={name:"Menu Wizard",steps:[r]},v={select:["menuId","menuName","menuGuid"],where:{}},y={getFn$:null,selIndex:v.select[0],selValueField:v.select[1],fetchFields:v.select,step:null,token:null,controlName:"menuParentId"},M=[{menuName:"create",menuGuid:"bd9b5bda6ab",navLocation:"/moduleman/menu/create",actionType:e.ActionType.navigate},{menuName:"dashboard",menuGuid:"d27294db69c1",navLocation:"/moduleman/menu/dashboard",actionType:e.ActionType.navigate}]},327:(N,I,n)=>{n.d(I,{AQ:()=>T,Fl:()=>v,M9:()=>M,VP:()=>t,ad:()=>r,lw:()=>y,n4:()=>b,o0:()=>F});var i=n(2952),e=n(4178),f=n(3425);const g=new e.FormsService,F=[{title:"ID",name:"moduleId",dbName:"module_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"number",disabled:!0},{title:"Guid",name:"moduleGuid",dbName:"module_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Name",name:"moduleName",dbName:"module_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[i.Validators.minLength(4),i.Validators.maxLength(20),i.Validators.required]]},{title:"Description",name:"moduleDescription",dbName:"module_description",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.textArea,fieldFor:e.FieldFor.createForm}],formatt:"textArea",savable:!0,formControlsConfig:["",[i.Validators.minLength(0),i.Validators.maxLength(300)]]},{title:"Enabled",name:"moduleEnabled",dbName:"module_enabled",type:e.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.status,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Sys",name:"isSysModule",dbName:"is_sys_module",type:e.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.status,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[i.Validators.required]]},{title:"System Module",name:"isSys",controls:[{controlType:e.ControlType.toggleSwitch,fieldFor:e.FieldFor.createForm}],primaryField:"isSysModule",formControlsConfig:["",[]]},{title:"App Module",name:"isApp",controls:[{controlType:e.ControlType.toggleSwitch,fieldFor:e.FieldFor.createForm}],primaryField:"isSysModule",formControlsConfig:["",[]]},{title:"Action",name:"action",type:e.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:e.ControlType.action,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.action,fieldFor:e.FieldFor.tableDisplay}]}],T={controllerName:"isSysModule",selectedItem:{index:0,optControlId:"",value:"",selected:!1},controlTypes:e.ControlType.toggleSwitch,options:[{index:0,optControlId:"isSys",value:"isSys",selected:!0},{index:1,optControlId:"isApp",value:"isApp",selected:!1}]},t={valid:null,data:{},ctx:"Sys"},r={token:"",stepTitle:"Create Module",stepItems:{nextButtonId:"stepToMenu"},tabPaneId:"moduleInfo",cardTitle:"Module Information",cardTitleDesc:"Fill all information below",module:"moduleman",controller:"module",formGroup:null,fields:g.filterByFieldFor(F,e.FieldFor.createForm)},b={name:"Module Wizard",steps:[r,f.PG]},v=[{menuName:"create",menuGuid:"bd9b5bda5ab",navLocation:"/moduleman/module/create",actionType:e.ActionType.navigate},{menuName:"dashboard",menuGuid:"d27294db59c1",navLocation:"/moduleman/module/dashboard",actionType:e.ActionType.navigate}],y={select:["moduleId","moduleName","moduleGuid"],where:{}},M={getFn$:null,selIndex:y.select[0],selValueField:y.select[1],fetchFields:y.select,step:null,token:null,controlName:"moduleId"}},8788:(N,I,n)=>{n.d(I,{O:()=>T});var i=n(4178),e=n(4866),f=n(2264);let T=(()=>{class t{svMenu;svNotif;svForm;token;ddlData={config:{suppressScrollX:!0,wheelSpeed:.3},header:{title:{lable:"Notifications",cls:"",action:null},sideLink:{lable:"View All",cls:"",action:null}},footer:{label:"View All",icon:"",action:null},data:[{label:"item 1",description:"If several languages coalesce the grammar",time:"3 min ago"},{label:"item 2",description:"It will seem like simplified English",time:"1 hr ago"},{label:"item 3",description:"If several languages coalesce the grammar",time:"4 hr ago"}]};pushEnvelop={pushData:{appId:"",appSockets:[],pushGuid:"",m:null,pushRecepients:i.DEFAULT_PUSH_RECEPIENTS,emittEvent:"push-notif",triggerEvent:"send-notif",token:"",commTrack:{initTime:null,relayTime:null,pushed:!1,pushTime:null,relayed:!1,deliveryTime:null,delivered:!1,completed:!1,completedTime:null,cached:!1,cachedTime:null,saved:!1,savedTime:null},isNotification:null,isAppInit:null},req:null,resp:null};numericNumberReg1="^-?[0-9]\\d*(\\.\\d{1,2})?$";numericNumberReg2="/^[0-9]d*$/";numericNumberReg3=new RegExp(/^-?[0-9]\\d*(\\.\\d{1,2})?$/,"i");numericNumberReg4=new RegExp(/^[0-9]\d*$/,"i");constructor(r,b,v){this.svMenu=r,this.svNotif=b,this.svForm=v}setIconsData$(r,b){r.fields.map((v,y)=>{v.name===b&&(r.fields[y].ddlInfo.selData$=(0,e.of)(this.ddlData),r.fields[y].ddlInfo.selIndex="iconId",r.fields[y].ddlInfo.selValueField="iconName",r.fields[y].ddlInfo.selPlaceholder="...Choose")})}setDdl$(r){if(r.token){const b=new e.Subject;let v=[];return r.getFn$.subscribe(y=>{const M=y;console.log("ModulemanService::setDdl$()/response:",M),console.log("ModulemanService::setDdl$()/ddlCtx.step.fields:",r.step),M.app_state.success?(v=M.data.items,r.step.fields.map((c,D)=>{console.log("ModulemanService::setDdl$()/f.name1:",c.name),console.log("ModulemanService::setDdl$()/ddlCtx.controlName:",r.controlName),console.log("ModulemanService::setDdl$()/f:",c),c.name===r.controlName&&"ddlInfo"in c&&(console.log("ModulemanService::setDdl$()/f.name2:",c.name),r.step.fields[D].ddlInfo.selData$=(0,e.of)(M.data.items),r.step.fields[D].ddlInfo.selIndex=r.selIndex,r.step.fields[D].ddlInfo.selValueField=r.selValueField,r.step.fields[D].ddlInfo.selPlaceholder="...Choose")}),b.next(v)):(this.pushEnvelop.resp=M,this.svNotif.emitNotif(this.pushEnvelop),b.next(v))}),b.asObservable()}return(0,e.of)([])}static \u0275fac=function(b){return new(b||t)(f.\u0275\u0275inject(i.MenuService),f.\u0275\u0275inject(i.NotificationService),f.\u0275\u0275inject(i.FormsService))};static \u0275prov=f.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},6758:(N,I,n)=>{n.d(I,{c:()=>F});const i="https://cd-api.co.ke",F={appId:"",production:!1,apiEndpoint:`${i}:3001/api`,sioEndpoint:`${i}:3002`,wsEndpoint:"ws://cd-api.co.ke:3000",wsMode:"wss",pushConfig:{sio:{enabled:!0},wss:{enabled:!1},pusher:{enabled:!0,apiKey:"DtVRY9V5j41KwSxKrd8L_dRijUJh9gVcqwBH5wb96no",options:{cluster:"ap2",forceTLS:!0,userAuthentication:{endpoint:"https://cd-api.co.ke:3002/pusher/auth",transport:"ajax",params:{},headers:{},includeCredentials:!0,customHandler:null},channelAuthorization:{endpoint:"https://cd-api.co.ke:3002/pusher/auth"},authEndpoint:"https://cd-api.co.ke:3002/pusher/auth"}}},CD_PORT:3001,consumerToken:"B0B3DA99-1859-A499-90F6-1E3F69575DCD",clientContext:{entity:"ASDAP",clientAppId:2,consumerToken:"B0B3DA99-1859-A499-90F6-1E3F69575DCD"},USER_RESOURCES:"http://routed-93/user-resources",apiHost:"https://cd-api.co.ke",sioHost:"https://cd-api.co.ke",shellHost:"https://asdap.net",consumer:"",clientAppGuid:"ca0fe39f-92b2-484d-91ef-487d4fc462a2",clientAppId:2,SOCKET_IO_PORT:3002,defaultauth:"cd-auth",mfManifestPath:"/assets/mf.manifest.json",apiOptions:{headers:{"Content-Type":"application/json"}},sioOptions:{path:"/socket.io",transports:["websocket","polling"],secure:!0},firebaseConfig:{apiKey:"",authDomain:"",databaseURL:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""}}},467:(N,I,n)=>{function i(e,C,f,g,F,T,t){try{var p=e[T](t),r=p.value}catch(b){return void f(b)}p.done?C(r):Promise.resolve(r).then(g,F)}function u(e){return function(){var C=this,f=arguments;return new Promise(function(g,F){var T=e.apply(C,f);function t(r){i(T,g,F,t,p,"next",r)}function p(r){i(T,g,F,t,p,"throw",r)}t(void 0)})}}n.d(I,{A:()=>u})}}]);